<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Picture Pick Challenge</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter font from Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Inter", sans-serif;
        background-color: #f0f2f5; /* Light gray background */
      }
      /* Custom styles for glowing button effect */
      .glow-button {
        transition: all 0.3s ease;
        box-shadow: 0 0 0px rgba(0, 0, 0, 0);
      }
      .glow-button:hover {
        box-shadow: 0 0 15px rgba(59, 130, 246, 0.7); /* Blue glow on hover */
        transform: translateY(-2px);
      }
      .picture-card {
        transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
      }
      .picture-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
      }
      .picture-card.selected {
        border: 4px solid #10b981; /* Green border for selected picture */
        box-shadow: 0 0 20px rgba(16, 185, 129, 0.6);
        transform: scale(1.03);
      }
    </style>
  </head>
  <body
    class="min-h-screen flex flex-col items-center py-8 px-4 sm:px-6 lg:px-8"
  >
    <!-- Main Container -->
    <div
      class="bg-white p-6 sm:p-8 md:p-10 rounded-xl shadow-2xl w-full max-w-6xl"
    >
      <!-- Header Section -->
      <header class="text-center mb-10">
        <h1
          class="text-4xl sm:text-5xl font-extrabold text-gray-900 mb-4 tracking-tight"
        >
          Picture Pick Challenge
        </h1>
        <p class="text-lg sm:text-xl text-gray-600">
          Deposit to play, pick your lucky picture, and win the pot!
        </p>
      </header>

      <!-- Game Information Section -->
      <section class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-10">
        <div class="bg-blue-50 p-6 rounded-lg shadow-md border border-blue-200">
          <h2 class="text-2xl font-bold text-blue-700 mb-4 flex items-center">
            <svg
              class="w-6 h-6 mr-2"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.592 1L21 12m-2.208 9L15 12m-6 0L3 12m9 2c-1.11 0-2.08-.402-2.592-1L3 12m2.208-9L9 12m6 0l-3 3m0-3V4"
              ></path>
            </svg>
            Game Rules
          </h2>
          <ul class="list-disc list-inside text-gray-700 space-y-2">
            <li>10 players required to start the game.</li>
            <li>Each player deposits an agreed-upon amount.</li>
            <li>10 unique pictures will be displayed.</li>
            <li>Each player picks one picture.</li>
            <li>
              The winner is the one who picks the "lucky" picture and takes the
              entire prize pool!
            </li>
          </ul>
        </div>
        <div
          class="bg-green-50 p-6 rounded-lg shadow-md border border-green-200"
        >
          <h2 class="text-2xl font-bold text-green-700 mb-4 flex items-center">
            <svg
              class="w-6 h-6 mr-2"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.592 1L21 12m-2.208 9L15 12m-6 0L3 12m9 2c-1.11 0-2.08-.402-2.592-1L3 12m2.208-9L9 12m6 0l-3 3m0-3V4"
              ></path>
            </svg>
            Game Status
          </h2>
          <div class="text-gray-700 space-y-2">
            <p class="flex items-center">
              <strong class="mr-2">Players Joined:</strong>
              <span id="players-joined">0</span> / 10
            </p>
            <p class="flex items-center">
              <strong class="mr-2">Prize Pool:</strong> $<span id="prize-pool"
                >0.00</span
              >
            </p>
            <p class="flex items-center">
              <strong class="mr-2">Your ID:</strong>
              <span id="user-id">Loading...</span>
            </p>
          </div>
          <div class="mt-4 flex flex-col sm:flex-row gap-4">
            <button
              id="join-game-btn"
              class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-6 rounded-lg shadow-lg glow-button flex-grow"
            >
              Join Game
            </button>
            <button
              id="declare-winner-btn"
              class="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-3 px-6 rounded-lg shadow-lg glow-button flex-grow"
              disabled
            >
              Declare Winner
            </button>
          </div>
        </div>
      </section>

      <!-- Picture Selection Area -->
      <section class="mb-10 text-center">
        <h2 class="text-3xl font-bold text-gray-900 mb-6">
          Pick Your Lucky Picture!
        </h2>
        <div
          id="pictures-container"
          class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 sm:gap-6 justify-center"
        >
          <!-- Placeholder for 10 pictures -->
          <div
            class="picture-card bg-gray-100 rounded-lg shadow-md overflow-hidden cursor-pointer"
            data-id="1"
          >
            <img
              src="https://placehold.co/200x200/B0E0E6/000000?text=Pic+1"
              alt="Picture 1"
              class="w-full h-auto rounded-t-lg"
            />
            <div class="p-3 text-lg font-medium text-gray-800">Picture 1</div>
          </div>
          <div
            class="picture-card bg-gray-100 rounded-lg shadow-md overflow-hidden cursor-pointer"
            data-id="2"
          >
            <img
              src="https://placehold.co/200x200/F08080/000000?text=Pic+2"
              alt="Picture 2"
              class="w-full h-auto rounded-t-lg"
            />
            <div class="p-3 text-lg font-medium text-gray-800">Picture 2</div>
          </div>
          <div
            class="picture-card bg-gray-100 rounded-lg shadow-md overflow-hidden cursor-pointer"
            data-id="3"
          >
            <img
              src="https://placehold.co/200x200/90EE90/000000?text=Pic+3"
              alt="Picture 3"
              class="w-full h-auto rounded-t-lg"
            />
            <div class="p-3 text-lg font-medium text-gray-800">Picture 3</div>
          </div>
          <div
            class="picture-card bg-gray-100 rounded-lg shadow-md overflow-hidden cursor-pointer"
            data-id="4"
          >
            <img
              src="https://placehold.co/200x200/DDA0DD/000000?text=Pic+4"
              alt="Picture 4"
              class="w-full h-auto rounded-t-lg"
            />
            <div class="p-3 text-lg font-medium text-gray-800">Picture 4</div>
          </div>
          <div
            class="picture-card bg-gray-100 rounded-lg shadow-md overflow-hidden cursor-pointer"
            data-id="5"
          >
            <img
              src="https://placehold.co/200x200/FFD700/000000?text=Pic+5"
              alt="Picture 5"
              class="w-full h-auto rounded-t-lg"
            />
            <div class="p-3 text-lg font-medium text-gray-800">Picture 5</div>
          </div>
          <div
            class="picture-card bg-gray-100 rounded-lg shadow-md overflow-hidden cursor-pointer"
            data-id="6"
          >
            <img
              src="https://placehold.co/200x200/ADD8E6/000000?text=Pic+6"
              alt="Picture 6"
              class="w-full h-auto rounded-t-lg"
            />
            <div class="p-3 text-lg font-medium text-gray-800">Picture 6</div>
          </div>
          <div
            class="picture-card bg-gray-100 rounded-lg shadow-md overflow-hidden cursor-pointer"
            data-id="7"
          >
            <img
              src="https://placehold.co/200x200/F0E68C/000000?text=Pic+7"
              alt="Picture 7"
              class="w-full h-auto rounded-t-lg"
            />
            <div class="p-3 text-lg font-medium text-gray-800">Picture 7</div>
          </div>
          <div
            class="picture-card bg-gray-100 rounded-lg shadow-md overflow-hidden cursor-pointer"
            data-id="8"
          >
            <img
              src="https://placehold.co/200x200/D3D3D3/000000?text=Pic+8"
              alt="Picture 8"
              class="w-full h-auto rounded-t-lg"
            />
            <div class="p-3 text-lg font-medium text-gray-800">Picture 8</div>
          </div>
          <div
            class="picture-card bg-gray-100 rounded-lg shadow-md overflow-hidden cursor-pointer"
            data-id="9"
          >
            <img
              src="https://placehold.co/200x200/A20025/FFFFFF?text=Pic+9"
              alt="Picture 9"
              class="w-full h-auto rounded-t-lg"
            />
            <div class="p-3 text-lg font-medium text-gray-800">Picture 9</div>
          </div>
          <div
            class="picture-card bg-gray-100 rounded-lg shadow-md overflow-hidden cursor-pointer"
            data-id="10"
          >
            <img
              src="https://placehold.co/200x200/50C878/FFFFFF?text=Pic+10"
              alt="Picture 10"
              class="w-full h-auto rounded-t-lg"
            />
            <div class="p-3 text-lg font-medium text-gray-800">Picture 10</div>
          </div>
        </div>
        <p
          id="message-box"
          class="mt-6 text-xl font-semibold text-gray-800"
        ></p>
      </section>

      <!-- Winner Declaration and Reset (Placeholder) -->
      <section class="text-center">
        <h2 class="text-3xl font-bold text-gray-900 mb-4">Winner!</h2>
        <div
          id="winner-display"
          class="bg-yellow-100 p-6 rounded-lg shadow-inner border border-yellow-300 text-2xl font-bold text-yellow-800 mb-6 hidden"
        >
          The winner is: <span id="winner-name"></span>! Congratulations!
        </div>
      </section>
    </div>

    <script>
        // Game state variables
        let gameState = {
          players: {},
          prizePool: 0,
          depositAmount: 10, // Default deposit amount (you can change this)
          luckyPictureId: null,
          gameStarted: false,
          winnerDeclared: false,
          currentUserId: generateUserId(),
          selectedPicture: null
        };
      
        // DOM elements
        const joinGameBtn = document.getElementById('join-game-btn');
        const declareWinnerBtn = document.getElementById('declare-winner-btn');
        const playersJoinedEl = document.getElementById('players-joined');
        const prizePoolEl = document.getElementById('prize-pool');
        const userIdEl = document.getElementById('user-id');
        const messageBox = document.getElementById('message-box');
        const winnerDisplay = document.getElementById('winner-display');
        const winnerNameEl = document.getElementById('winner-name');
        const pictureCards = document.querySelectorAll('.picture-card');
      
        // Initialize the game
        function initGame() {
          userIdEl.textContent = gameState.currentUserId;
          updateGameStatus();
          
          // Set random lucky picture (1-10)
          gameState.luckyPictureId = Math.floor(Math.random() * 10) + 1;
          console.log(`Lucky picture is: ${gameState.luckyPictureId}`); // For debugging
          
          // Set up event listeners
          setupEventListeners();
        }
      
        // Generate a random user ID
        function generateUserId() {
          return 'user-' + Math.random().toString(36).substr(2, 9);
        }
      
        // Update game status display
        function updateGameStatus() {
          const playerCount = Object.keys(gameState.players).length;
          playersJoinedEl.textContent = playerCount;
          prizePoolEl.textContent = gameState.prizePool.toFixed(2);
          
          // Enable/disable buttons based on game state
          joinGameBtn.disabled = gameState.players[gameState.currentUserId] !== undefined;
          declareWinnerBtn.disabled = playerCount < 10 || gameState.winnerDeclared;
        }
      
        // Set up event listeners
        function setupEventListeners() {
          // Join game button
          joinGameBtn.addEventListener('click', () => {
            joinGame();
          });
          
          // Declare winner button (only for admin)
          declareWinnerBtn.addEventListener('click', () => {
            declareWinner();
          });
          
          // Picture selection
          pictureCards.forEach(card => {
            card.addEventListener('click', () => {
              if (!gameState.gameStarted || gameState.winnerDeclared) return;
              
              const pictureId = parseInt(card.dataset.id);
              selectPicture(pictureId);
            });
          });
        }
      
        // Join the game
        function joinGame() {
          if (gameState.players[gameState.currentUserId]) {
            showMessage('You have already joined the game!');
            return;
          }
          
          // In a real app, you would integrate with a payment system here
          // For this demo, we'll simulate the deposit
          const depositAmount = gameState.depositAmount;
          
          gameState.players[gameState.currentUserId] = {
            id: gameState.currentUserId,
            hasDeposited: true,
            depositAmount: depositAmount,
            selectedPicture: null,
            isWinner: false
          };
          
          gameState.prizePool += depositAmount;
          
          showMessage(`You have successfully deposited $${depositAmount.toFixed(2)} and joined the game!`);
          updateGameStatus();
          
          // Check if we can start the game (10 players)
          if (Object.keys(gameState.players).length >= 10) {
            startGame();
          }
        }
      
        // Start the game when we have 10 players
        function startGame() {
          gameState.gameStarted = true;
          showMessage('Game has started! Please select your picture.');
        }
      
        // Select a picture
        function selectPicture(pictureId) {
          if (!gameState.players[gameState.currentUserId]?.hasDeposited) {
            showMessage('You need to deposit and join the game first!');
            return;
          }
          
          if (gameState.players[gameState.currentUserId].selectedPicture) {
            showMessage('You have already selected a picture!');
            return;
          }
          
          // Check if picture is already taken by another player
          const pictureTaken = Object.values(gameState.players).some(
            player => player.selectedPicture === pictureId
          );
          
          if (pictureTaken) {
            showMessage('This picture has already been selected by another player!');
            return;
          }
          
          // Update player's selected picture
          gameState.players[gameState.currentUserId].selectedPicture = pictureId;
          gameState.selectedPicture = pictureId;
          
          // Update UI
          pictureCards.forEach(card => {
            card.classList.remove('selected');
            if (parseInt(card.dataset.id) === pictureId) {
              card.classList.add('selected');
            }
          });
          
          showMessage(`You have selected Picture ${pictureId}! Waiting for other players...`);
          
          // Check if all players have selected pictures
          checkAllPicturesSelected();
        }
      
        // Check if all players have selected pictures
        function checkAllPicturesSelected() {
          const allSelected = Object.values(gameState.players).every(
            player => player.selectedPicture !== null
          );
          
          if (allSelected && Object.keys(gameState.players).length >= 10) {
            showMessage('All players have selected pictures. Ready to declare winner!');
            declareWinnerBtn.disabled = false;
          }
        }
      
        // Declare the winner
        function declareWinner() {
          if (gameState.winnerDeclared) return;
          
          // Find the winner (player who selected the lucky picture)
          let winner = null;
          for (const playerId in gameState.players) {
            if (gameState.players[playerId].selectedPicture === gameState.luckyPictureId) {
              winner = gameState.players[playerId];
              winner.isWinner = true;
              break;
            }
          }
          
          if (winner) {
            gameState.winnerDeclared = true;
            winnerDisplay.classList.remove('hidden');
            winnerNameEl.textContent = winner.id;
            
            // Highlight the winning picture
            pictureCards.forEach(card => {
              if (parseInt(card.dataset.id) === gameState.luckyPictureId) {
                card.classList.add('selected');
                card.style.borderColor = '#10b981'; // Green border
                card.style.boxShadow = '0 0 20px rgba(16, 185, 129, 0.6)';
              }
            });
            
            showMessage(`Congratulations to ${winner.id} for winning $${gameState.prizePool.toFixed(2)}!`);
          } else {
            showMessage('No winner found! This should not happen.');
          }
          
          declareWinnerBtn.disabled = true;
        }
      
        // Show message to user
        function showMessage(message) {
          messageBox.textContent = message;
        }
      
        // Initialize the game when the page loads
        document.addEventListener('DOMContentLoaded', initGame);
      </script>
  </body>
</html>
